<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>All PDFs — CSE331</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:system-ui,Arial;margin:24px;max-width:880px}
    h1{margin:0 0 12px}
    input{padding:8px 10px;width:100%;max-width:420px;margin:8px 0 16px}
    ul{list-style:none;padding:0}
    li{padding:10px 0;border-bottom:1px solid #eee}
    a{text-decoration:none}
    .muted{color:#666;font-size:12px}
  </style>
</head>
<body>
<h1>All PDFs</h1>
<p class="muted">Repo: jnh070903 / CSE331-AUTOMATA-AND-COMPUTABILITY</p>
<input id="q" placeholder="Search PDFs..." />
<ul id="list"><li>Loading…</li></ul>

<script>
const user  = 'jnh070903';
const repo  = 'CSE331-AUTOMATA-AND-COMPUTABILITY';
const branch= 'main';

async function fetchPDFs(){
  const url = https://api.github.com/repos/${user}/${repo}/git/trees/${branch}?recursive=1;
  const res = await fetch(url);
  const data = await res.json();
  const files = (data.tree || [])
    .filter(t => t.type === 'blob' && t.path.toLowerCase().endsWith('.pdf'))
    .map(t => ({path: t.path, size: t.size}));

  const list = document.getElementById('list');
  const q = document.getElementById('q');

  function render(filter=''){
    const term = filter.toLowerCase();
    list.innerHTML = '';
    files
      .filter(f => f.path.toLowerCase().includes(term))
      .sort((a,b)=> a.path.localeCompare(b.path))
      .forEach(f => {
        const li = document.createElement('li');
        const name = f.path.split('/').pop();
        const kb = f.size ? ` — ${(f.size/1024).toFixed(0)} KB` : '';
        li.innerHTML = `
          <a href="viewer.html?file=${encodeURIComponent(f.path)}">${name}</a>
          <div class="muted">${f.path}${kb}</div>`;
        list.appendChild(li);
      });
    if(!list.children.length){ list.innerHTML = '<li>No PDFs found.</li>'; }
  }

  q.addEventListener('input', e => render(e.target.value));
  render();
}
fetchPDFs();
</script>
</body>
</html>
